---
title: "Lab 0: Getting Started with dplyr"
subtitle: "My First Data Analysis"
author: "Ethan Harner"
date: 1/20/26
format: 
  html:
    code-fold: false
    toc: true
    toc-location: left
    theme: cosmo
execute:
  warning: false
  message: false
---

# Overview

Welcome to your first lab! In this (not graded) assignment, you'll practice the fundamental dplyr operations I overviewed in class using car sales data. This lab will help you get comfortable with:

- Basic data exploration
- Column selection and manipulation  
- Creating new variables
- Filtering data
- Grouping and summarizing

**Instructions:** Copy this template into your portfolio repository under a `lab_0/` folder, then complete each section with your code and answers. You will write the code under the comment section in each chunk.
Be sure to also copy the data folder into your `lab_0` folder.

# Setup

```{r setup}
# Load the tidyverse library
#install.packages("tidyverse")
library(tidyverse)

# Read in the car sales data
# Make sure the data file is in your lab_0/data/ folder
car_data <- read_csv("data/car_sales_data.csv")
```

# Exercise 1: Getting to Know Your Data

## 1.1 Data Structure Exploration

Explore the structure of your data and answer these questions:

```{r explore-structure}
# Use glimpse() to see the data structure

glimpse(car_data)

# Check the column names
colnames(car_data)

# Look at the first few rows
head(car_data)
```

**Questions to answer:**
- How many rows and columns does the dataset have?

- What types of variables do you see (numeric, character, etc.)?

- Are there any column names that might cause problems? Why?


**Your answers:**
- Rows: The data have 7,000 rows across seven columns. 

- Columns: The data have seven columns.

- Variable types: I see the following variable types: character, and double number variables. 

- Problematic names: Engine size might cause problems because they are stored as numerical data. Since
this data is categorical (you can't subdivide an engine type), it might be best to 
organize it as character data. I'm also unsure as to why engine size and fuel type
are stored with `` around their names, as this might make it difficult to call the data.
It might be easier to store them with an _ . The dates are also not stored as date. 

## 1.2 Tibble vs Data Frame

Compare how tibbles and data frames display:

```{r tibble-vs-dataframe}
# Look at the tibble version (what we have)
car_data

# Convert to regular data frame and display
car_df <- as.data.frame(car_data)
car_df
```

**Question:** What differences do you notice in how they print?

**Your answer:** I am not noticing any differences in how they print. 

# Exercise 2: Basic Column Operations

## 2.1 Selecting Columns

Practice selecting different combinations of columns:

```{r column-selection}
# Select just Model and Mileage columns

only_model_mileage <- car_data %>%
  select(Model, Mileage)

# Select Manufacturer, Price, and Fuel type

manu_price_fuel <- car_data %>%
  select(Manufacturer, Price, `Fuel type`)

# Challenge: Select all columns EXCEPT Engine Size

not_engine_size <- car_data %>%
  select(!`Engine size`)

```

## 2.2 Renaming Columns

Let's fix a problematic column name:

```{r rename-columns}
# Rename 'Year of manufacture' to year

renamed_cars <- rename(car_df, year = `Year of manufacture`)

# Check that it worked
names(car_data)
```

**Question:** Why did we need backticks around `Year of manufacture` but not around `year`?

**Your answer:** There are spaces in `Year of manufacture` but not in year.

# Exercise 3: Creating New Columns

## 3.1 Calculate Car Age

```{r calculate-age}
# Create an 'age' column (2025 minus year of manufacture)

car_ages <- renamed_cars %>% 
  mutate(age = 2025 - year)

# Create a mileage_per_year column  

car_ages <- car_ages %>%
  mutate(mileage_per_year = Mileage/age)

# Look at your new columns
car_check <- select(car_ages, Model, year, age, Mileage, mileage_per_year)

```

## 3.2 Categorize Cars

```{r categorize-cars}
# Create a price_category column where if price is < 15000, its is coded as budget, between 15000 and 30000 is midrange and greater than 30000 is mid-range (use case_when)

car_ages <- car_ages %>%
  mutate(price_category = 
           case_when(
             Price < 15000 ~ "budget", 
             Price >= 15000 & Price <= 30000 ~ "midrange",
             Price > 30000 ~ "mid-range"
           ))
# Check your categories select the new column and show it

check_categories <- car_ages %>%
  select(price_category)

check_categories
```

# Exercise 4: Filtering Practice

## 4.1 Basic Filtering

```{r basic-filtering}
# Find all Toyota cars

Toyotas <- car_data %>%
  filter(Manufacturer %in% "Toyota")

Toyotas

# Find cars with mileage less than 30,000

low_mile_cars <- car_data %>%
  filter(Mileage < 30000)

low_mile_cars

# Find luxury cars (from price category) with low mileage

lux_and_low <- car_ages %>%
  filter(price_category %in% "mid-range") %>%
  filter(Mileage < 30000)

lux_and_low

```

## 4.2 Multiple Conditions

```{r multiple-conditions}
# Find cars that are EITHER Honda OR Nissan

Honda_Nissan <- car_data %>%
  filter(Manufacturer == "Honda" | Manufacturer == "Nissan")
         
Honda_Nissan

#There were no Hondas or Nissans in the dataset

# Find cars with price between $20,000 and $35,000

cars_price <- car_data %>%
  filter(Price >= 20000 & Price <= 35000)
cars_price
# Find diesel cars less than 10 years old

diesel_new <- car_ages %>%
  filter(`Fuel type` %in% "Diesel") %>%
  filter(age < 10)

```

**Question:** How many diesel cars are less than 10 years old?

**Your answer:** 2,040 diesel cars are less than 10 years old.

# Exercise 5: Grouping and Summarizing

## 5.1 Basic Summaries

```{r basic-summaries}
# Calculate average price by manufacturer
avg_price_by_brand <- car_data %>%
  group_by(Manufacturer) %>%
  summarize(avg_price = mean(Price, na.rm = TRUE))

avg_price_by_brand

# Calculate average mileage by fuel type

avg_mileage_by_fuel_type <- car_data %>%
  group_by(`Fuel type`) %>%
  summarize(avg_miles = mean(Mileage))

# Count cars by manufacturer

manufacturer_count <- car_data %>%
  group_by(Manufacturer) %>%
  count()

```

## 5.2 Categorical Summaries

```{r categorical-summaries}
# Frequency table for price categories
manufacturer_count
```


# Submission Notes

**To submit this lab:**
1. Make sure your code runs without errors
2. Fill in all the "[YOUR ANSWER]" sections and complete all of the empty code! 
3. Save this file in your portfolio's `lab_0/` folder
4. Commit and push to GitHub
5. Check that it appears on your GitHub Pages portfolio site

**Questions?** Post on the canvas discussion board or come to office hours!